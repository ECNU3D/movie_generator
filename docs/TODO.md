# AI电影生成器 - 待办事项与进度追踪

> 本文档记录项目开发所需的待收集信息、待确认事项和开发计划。

---

## 1. 已完成功能

### 1.1 故事生成器 (Story Generator) ✅

基于 Streamlit + Gemini 的独立故事剧本生成工具，已实现功能：

- [x] 故事创意生成（随机/自定义）
- [x] 故事大纲生成（标题、简介、角色、剧集）
- [x] 人物数量自定义（1-10个）
- [x] 人物知识库（角色设定、重大经历追踪）
- [x] 分镜脚本生成
- [x] 分镜密度控制（少/中/多/自定义）
- [x] 剧集大纲编辑（直接编辑/AI辅助）
- [x] 一致性检查与自动修复
- [x] 编辑历史（撤销/重做）
- [x] 视频提示词生成（支持四大平台）
- [x] 图生视频提示词（首帧/首尾帧）
- [x] 一键导出大纲（Markdown格式）

### 1.2 视频平台文档 ✅

已整理四大视频生成平台的 API 文档：

- [x] **可灵 (Kling AI)** - 完整API文档，支持文生视频、图生视频、首尾帧、主体参考
- [x] **通义万相 (Tongyi)** - 完整API文档，支持 wan2.6 系列模型
- [x] **即梦AI (Jimeng)** - 完整API文档，支持 Pro 版多镜头叙事
- [x] **海螺视频 (Hailuo)** - 完整API文档，支持首尾帧生成视频

---

## 2. 待开发功能

### 2.1 视频平台接入（高优先级）

- [ ] 实现统一的 Provider 抽象层
- [ ] 接入可灵 API
- [ ] 接入通义万相 API
- [ ] 接入即梦 API
- [ ] 接入海螺 API
- [ ] 实现任务状态轮询/回调

### 2.2 核心功能扩展

- [ ] 角色参考图生成（文生图）
- [ ] 角色多角度参考图
- [ ] 主体参考一致性方案
- [ ] 分镜图片预览生成
- [ ] 视频生成任务管理
- [ ] 视频片段拼接

### 2.3 系统架构（中优先级）

- [ ] FastAPI 后端（替代 Streamlit 的纯前端方案）
- [ ] Next.js 前端
- [ ] 异步任务队列（Celery + Redis）
- [ ] 用户认证系统
- [ ] 成本统计与预算控制

### 2.4 素材管理

- [ ] 图片素材库
- [ ] 视频片段库
- [ ] 音频素材库
- [ ] 标签与分类系统

---

## 3. 待确认事项

### 3.1 技术细节

| 问题 | 状态 | 备注 |
|------|------|------|
| 各平台视频生成的最大时长限制 | ✅ 已确认 | 见 providers 文档 |
| 各平台是否支持主体参考 | ✅ 已确认 | 可灵、海螺支持 |
| 各平台API的并发限制和QPS | ✅ 已确认 | 见 providers 文档 |
| 各平台生成视频的分辨率选项 | ✅ 已确认 | 720P/1080P |
| 视频拼接方案选择 | ❓ 待确认 | FFmpeg vs WebCodecs |

### 3.2 业务需求

| 问题 | 状态 | 说明 |
|------|------|------|
| 目标用户群体 | ❓ 待确认 | 个人创作者/小团队/企业 |
| 是否需要多语言支持 | ❓ 待确认 | 影响国际化设计 |
| 视频成片导出格式 | ❓ 待确认 | MP4/MOV |
| 是否需要配音/字幕功能 | ❓ 待确认 | 可后期扩展 TTS |

---

## 4. 开发计划

### Phase 1: 故事生成器 ✅ 已完成
- 基于 Streamlit + Gemini 的 MVP
- 故事大纲、角色、分镜生成
- 视频提示词生成

### Phase 2: 视频平台接入（进行中）
- 统一 Provider 接口
- 接入 2-3 个视频平台
- 任务状态管理

### Phase 3: 完整工作流
- 分镜图片生成
- 视频生成与管理
- 视频拼接导出

### Phase 4: 架构升级
- FastAPI + Next.js 重构
- 用户系统
- 协作功能

---

## 5. 相关文档

- [故事生成器文档](../story_generator.md)
- [需求设计文档](./REQUIREMENTS.md)
- [视频平台文档](./providers/README.md)

---

*文档版本: 2.0*
*最后更新: 2026-01-24*
